---
layout: post
permalink: /sankey-V3
---

<style>
    #chartdiv {
      width: 100%;
      height: 500px
    }
    
    </style>
    
    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
    
    <!-- Chart code -->
    <script>
    am4core.ready(function() {
    
    // Themes begin
    am4core.useTheme(am4themes_animated);
    // Themes end
    
    var chart = am4core.create("chartdiv", am4charts.SankeyDiagram);
    chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
    
    chart.data = [
    {
   from: "Drug 1",
   to: "Preclinical research",
   value: 1,
   id: "A0-0"
 },
 {
   from: "Preclinical research",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "A0-1"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "No",
   value: 1,
   id: "A0-2"
 },
 {
   from: "Drug 1",
   to: "Preclinical research",
   value: 1,
   id: "A1-1"
 },
 {
   from: "Preclinical research",
   to: "Drug to provide significant improvement in quality of life (QOL)",
   value: 1,
   id: "A1-2"
 },
 {
   from: "Drug to provide significant improvement in quality of life (QOL)",
   to: "No",
   value: 1,
   id: "A1-3"
 },
 {
   from: "Drug 1",
   to: "Preclinical research",
   value: 1,
   id: "A2-1"
 },
 {
   from: "Preclinical research",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "A2-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "Yes",
   value: 1,
   id: "A2-3"
 },
 {
   from: "Drug 1",
   to: "Translational research",
   value: 1,
   id: "A3-1"
 },
 {
   from: "Translational research",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "A3-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "No",
   value: 1,
   id: "A3-3"
 },
 {
   from: "Drug 1",
   to: "Analyzing patient's medical data to identify drugs that look promising based on off-label use",
   value: 1,
   id: "A4-1"
 },
 {
   from: "Analyzing patient's medical data to identify drugs that look promising based on off-label use",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "A4-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "No",
   value: 1,
   id: "A4-3"
 },
 {
   from: "Drug 2",
   to: "High throughput drug screening being conducted",
   value: 1,
   id: "B0-1"
 },
 {
   from: "High throughput drug screening being conducted",
   to: "Drug to be freely available to patients off label with safety / efficacy data",
   value: 1,
   id: "B0-2"
 },
 {
   from: "Drug to be freely available to patients off label with safety / efficacy data",
   to: "No",
   value: 1,
   id: "B0-3"
 },
 {
   from: "Drug 2",
   to: "High throughput drug screening being conducted",
   value: 1,
   id: "B1-1"
 },
 {
   from: "High throughput drug screening being conducted",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "B1-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "No",
   value: 1,
   id: "B1-3"
 },
 {
   from: "Drug 2",
   to: "Preclinical research",
   value: 1,
   id: "B2-1"
 },
 {
   from: "Preclinical research",
   to: "Drug to be freely available to patients off label with safety / efficacy data",
   value: 1,
   id: "B2-2"
 },
 {
   from: "Drug to be freely available to patients off label with safety / efficacy data",
   to: "No",
   value: 1,
   id: "B2-3"
 },
 {
   from: "Drug 3",
   to: "Preclinical research",
   value: 1,
   id: "C0-1"
 },
 {
   from: "Preclinical research",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "C0-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "Yes",
   value: 1,
   id: "C0-3"
 },
 {
   from: "Drug 3",
   to: "Translational research",
   value: 1,
   id: "C1-1"
 },
 {
   from: "Translational research",
   to: "Drug to provide significant reduction in symptoms",
   value: 1,
   id: "C1-2"
 },
 {
   from: "Drug to provide significant reduction in symptoms",
   to: "No",
   value: 1,
   id: "C1-3"
 }
    ];
    
    let hoverState = chart.links.template.states.create("hover");
    hoverState.properties.fillOpacity = 0.6;
    
    chart.dataFields.fromName = "from";
    chart.dataFields.toName = "to";
    chart.dataFields.value = "value";
    
    chart.links.template.propertyFields.id = "id";
    chart.links.template.colorMode = "solid";
    chart.links.template.fill = new am4core.InterfaceColorSet().getFor("alternativeBackground");
    chart.links.template.fillOpacity = 0.1;
    chart.links.template.tooltipText = "";
    
    // highlight all links with the same id beginning
    chart.links.template.events.on("over", function(event){
      let link = event.target;
      let id = link.id.split("-")[0];
    
      chart.links.each(function(link){
        if(link.id.indexOf(id) != -1){
          link.isHover = true;
        }
      })
    })
    
    chart.links.template.events.on("out", function(event){  
      chart.links.each(function(link){
        link.isHover = false;
      })
    })
    
    // for right-most label to fit
    chart.paddingRight = 30;
    
    // make nodes draggable
    var nodeTemplate = chart.nodes.template;
    nodeTemplate.inert = true;
    nodeTemplate.readerTitle = "Drag me!";
    nodeTemplate.showSystemTooltip = true;
    nodeTemplate.width = 20;
    
    // make nodes draggable
    var nodeTemplate = chart.nodes.template;
    nodeTemplate.readerTitle = "Click to show/hide or drag to rearrange";
    nodeTemplate.showSystemTooltip = true;
    nodeTemplate.cursorOverStyle = am4core.MouseCursorStyle.pointer
    
    }); // end am4core.ready()
    </script>
    
    <!-- HTML -->
    <div id="chartdiv"></div>
    